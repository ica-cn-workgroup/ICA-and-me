# 6. 污水处理系统的数据分析和监控
监测可以获取大量数据，但需要从监测数据中适当的提取信息，用于决策支持、扰动和过程变化的预警、跟踪关注的相关参数以及基础的操作控制。仪器仪表的监测应该是每天24h和每周7天连续提供监测数据。然而，即便是可靠的仪表在控制过程中也存在失败，如图4.1所示，如果仪表用于闭环控制将产生严重的后果。因此，在使用测量数据进行控制之前，需进行实时数据验证（类似于模型中的实测数据校核过程）。必须找到并修正错误的测量数据，以避免基于测量数据的错误结论。污水处理厂决策系统的组成如图6所示。通过仪表跟踪当前进程的运行状态称为“监控”。

![Fig. 6](fig1.png)

Fig. 6 决策系统 (Olsson and Newell, 1999)

长期记录发现，这些组件传统上是水厂操作员凭直觉操控使用，控制算法的开发是基于他们平时工作经验的潜意识。ICA的许多研究已经从系统的角度解决了这一问题。挑战是在控制计算机中记录这些经验，以便操作员一致的使用这些信息，并保存从有经验的操作员处获得的知识。

## 6.1 数据采集
在二十世纪70年代和80年代初期，废水行业几乎没有任何出版物介绍数据筛选和监测校核的方法。而控制行业已开发出用于早期计算机的控制方法。1985年Kanaya等人的一篇文章明确的解决了废水处理行业的控制问题。几乎所有的测量系列都会受缺失值、噪声、极端值等问题的影响。每一个信号的振幅、平均值、偏离正常情况、变化率、趋势和变化倾向都必须潜心分析。

废水系统是相对缓慢的系统。因此，当水厂出现干扰时抑制他们的影响十分困难。因此需要前期预警系统。1993年在加拿大汉密尔顿的ICA会议上，Olsson提出，在过去的几年，对干扰因素的检测和隔离的关注度显著增加，预测这个领域可获利。

## 6.2 在线参数评估
在2.3章节我们讨论了离线识别是获知废水处理系统动态的一种方法。它也被用于检测过程和传感器的变化。在许多情况下，对单个信号的追踪是不够的，无法揭示过程的真实状态。变量相互影响，必须同时观测多个变量。使用在线监测仪表，可以跟踪水厂性能，找出表示水厂处于正常运行状态或极端运行状态的关键参数。在这些情况下的控制操作十分不同。迫在眉睫的挑战是如何从在线数据中识别出模型，顺应发展趋势，精简模型。

化学过程控制中，采用在线计算过程的质量平衡，并用传感器验证。当然这也可以用于废水处理。例如，反应器中MLSS的质量平衡计算可以验证MLSS（混合液悬浮固体浓度）和RSSS(回流污泥固体浓度)的测量结果是否一致。2.3章节讨论了呼吸作用的评估。使用气流速率和溶解氧浓度的信息可以估算反应器内的呼吸作用。下面讨论可以在线估算的关键参数。

### 6.2.1 估算沉淀反应
沉淀池动力过程识别实验主导产生了结构模型 (Olsson and Chapman, 1985)

![eq1](eq1.png)

 C<sub>e</sub>是沉淀池出水浓度， _Q_ 是沉淀池进水流量。参数α<sub>i</sub>可以递归更新是好现象：

![eq2](eq2.png)

比较实测值 _C<sub>e</sub>_ 与模型预测的出水浓度 ![eq3](ep3.JPG) 。如果预测值接近实测值，则不作校正。如果测量值和模拟结果之间的差异显著，则 _α_ 必须改变一个值。这表明沉降过程改变。最后，我们失望的发现递归法不能充分可靠的监测沉降过程的变化。监测数据的质量实在不够好。

### 6.2.2 估算硝酸盐浓度
基于ASM1一个子集Cecil (2004) 的动态模型实时估算硝酸盐浓度。曝气池在线监测溶解氧、氨和氧化还原的浓度。模型用这些测量值连续调节进水氨浓度、硝化速率、反硝化速率和净水解的值。然后每10s更新计算一次硝酸盐的浓度。估算方案用于两个全规模的活性污泥水厂，模拟值与现场实测出水硝酸盐浓度呈现令人满意的一致性。

2011年Mulas等人描述了芬兰首都赫尔辛基Viikinma污水处理厂，在后置反硝化单元使用硝酸盐浓度估算。甲醇剂量的控制通常是基于在线监测滤清器中硝酸盐的浓度。作者介绍了一系列实时估算硝酸盐浓度的软传感器的进展。如果仪表发生故障，软测量是现有检测仪表的软件补充，提供一个更强大的控制潜力。诸般多变量技术见6.3，线性和非线性均已成功应用，反应的估算精度与实际硝酸盐传感器同阶（污水处理过程中的各种变量，无论是线性相关还是非线性相关，虚拟传感器估算提供的控制方案与实际硝酸盐传感器监测提供的控制方案是一样的，两者在各个反应阶段的控制都相近）。

### 6.2.3 软测量技术的传感器诊断
随着在线仪表对运营现代化污水处理厂越来越重要，需建立一种在前期指示传感器偏差的诊断方法。2002年在Rya污水处理厂，软测量已被用来验证传感器的读数。包括在线质量平衡计算，系统提供一个计算值与实际测量值对比。另一个案例是基于出水浊度计算出水总磷。其他计算还包括基于液位变化估算流量。

## 6.3 监控
多变量分析是检测操作模式的一种方法。m个变量的大数据集可以看做是一个m维空间的数据云。所有测量值一瞬间构成云中的一个点。变量之间是相互关联的，因为大多数变量反映了以不同方式推动反应过程的潜在机理。因此云的真实维度通常比m小。通过将数据云投影到低维空间，通常可以找到关键变量。在只有两个变量的最简单情况下，回归线或曲线可以代表两者。多元分析在化工行业已使用多年，20世纪90年代后期被Rosen 和Olsson引入废水行业。在正常操作条件下，云被限制在一定的空间内。如果某些变量改变，云会移动到限制空间外，操作员可以轻松检测到发生了什么事。原则上操作员会收到一个自动检测，不仅仅是超过允许范围的某一变量，而是超过报警限度的许多信号的组合。现在的分析允许回溯数据，以便识别引起偏差的真实物理信号。每一个变量都可以在允许范围内变化，但这些偏差的组合会引起报警。

第一个挑战是找到一种将数据投影到更小空间的方法。第二个挑战是找到常规“云”的边界条件。换句话说，我们怎样找到一个合适的方法计算这个边界。对于单个变量，我们可以定义一组或两组报警限制。为收集更多的信号，这个“报警限制”必须更加精细。

降低数据云维度最著名的方法是主成分分析。简单来说，数据容易被投射到一个小维度。但PCA分析法不足以处理像进水流量和组分这种高频变化的数据。此外，废水处理系统中宽范围的时间常数使我们很难仅从一个时间尺度观察数据的相关性。自适应PCA可以处理此类挑战，多尺度PCA利用小波变换将测量数据分解成不同的时间尺度。这样PCA可以用于监控每个时间尺度。这些方法被Rosen 和Lennox用于监测废水处理数据。

不同的操作状态由多元空间中不同的位置表示。数据点在不同中心点的集群中可以被识别。集群方法可用于定义当前数据点从属预定义类的程度。当集群之间的边界不确定或某个区域未被一个集群覆盖时，模糊逻辑得以显著应用。模糊边界还为各集群之间的无缝转换提供了方法

多变量法在许多程序中应用的很成功，但在其他方面用处不大。Rosen等人2003年提供了这些方法失败案例相关的描述和领悟，并指导污水处理操作中如何适宜的使用这些方法。污水处理监测中具体的挑战与数据质量和可靠性差有关。变量之间的非线性关系也存在。多变量分析法通常用于静态系统。所有这些挑战都必须可以解决，以获得成功的监测。PCA法用于监测序批式反应器（即SBR，序列间歇式活性污泥法），作为控制相位长度（停留时间）的基础。

## 6.4 基于知识（经验）的系统
上世纪80年代末90年代初期，人们对基于知识的系统产生了浓厚兴趣，通常称为专家系统。该系统经常被用来代替数学术语写的控制算法，他们的目标也是为运营商提供一些咨询系统。1990年的ICA会议展示了几篇这个主题的论文。专家系统的期望经常被夸大，与传统反馈控制器相比，在水厂的性能上没有任何改进。原因很简单，性能受到过程动力学和测量的知识的限值，不是算法的限制。工业控制的其他应用也注意到了专家系统类似的不切实际的期望。基于知识推理的系统在更高层次的全厂控制系统上是合理的，在第11章探讨。
